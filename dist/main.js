(()=>{"use strict";var t={625:(t,e,n)=>{t.exports=n.p+"97be26bc16795b881b8b.png"}},e={};function n(a){var o=e[a];if(void 0!==o)return o.exports;var s=e[a]={exports:{}};return t[a](s,s.exports,n),s.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var a=e.getElementsByTagName("script");a.length&&(t=a[a.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),(()=>{n(625);const t=[{name:"Squid game",url:"https://api.tvmaze.com/lookup/shows?imdb=tt10919420"},{name:"Game of Thrones",url:"https://api.tvmaze.com/lookup/shows?imdb=tt0944947"},{name:"Dexter",url:"https://api.tvmaze.com/lookup/shows?imdb=tt0773262"},{name:"Greyâ€™s Anatomy",url:"https://api.tvmaze.com/lookup/shows?imdb=tt0413573"},{name:"The Office",url:"https://api.tvmaze.com/lookup/shows?imdb=tt0386676"},{name:"Succession",url:"https://api.tvmaze.com/lookup/shows?imdb=tt7660850"},{name:"Rick & Morty",url:"https://api.tvmaze.com/lookup/shows?imdb=tt2861424"},{name:"The Walking Dead",url:"https://api.tvmaze.com/lookup/shows?imdb=tt1520211"}],e=t=>{const n=document.createElement(t.tag);return t.id&&(n.id=t.id),t.class.length>0&&n.classList.add(...t.class),t.textContent&&(n.textContent=t.textContent),t.attribute&&Object.keys(t.attribute).forEach((e=>{n.setAttribute(e,t.attribute[e])})),t.children&&t.children.forEach((t=>{n.appendChild(e(t))})),n};async function a(t){const n=await Promise.all(t.map((async t=>async function(t){const e=await fetch(t.url,{method:"GET"}),n=await e.json(),{name:a,image:{medium:o}}=n,s=a.toLowerCase().split(/[^A-Za-z0-9]/).join("-");return{name:a,cover:o,id:s}}(t))));return function(t,e){t.forEach((t=>{const n=e.find((e=>e.item_id===t.id));t.likes=n.likes}))}(n,await async function(){const t=await fetch("https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/DUygu2IA853rbrNq5k3K/likes",{method:"GET"});return await t.json()}()),function(t){const n=document.getElementById("tv-series-container");for(;n.firstChild;)n.removeChild(n.firstChild);var a;return t.forEach((t=>{var a;n.appendChild(e({tag:"article",id:(a=t).id,class:["serie","flex","flex-col"],children:[{tag:"img",class:[],attribute:{src:a.cover,alt:a.name}},{tag:"div",class:[],children:[{tag:"h2",class:["text-3xl","font-rockwell","text-center","font-semibold","my-4"],textContent:a.name},{tag:"div",class:["flex","items-stretch","gap-4"],children:[{tag:"button",class:["grow","bg-stone-300","border","border-stone-300","rounded-md","font-rockwell","text-xl","hover:bg-stone-100","hover:shadow-md"],textContent:"Comment"},{tag:"div",class:["flex","flex-col","items-center","border","rounded-md","p-2"],children:[{tag:"i",class:["fas","fa-heart","text-red-600","cursor-pointer","text-2xl","hover:scale-125"]},{tag:"p",class:["font-bold"],textContent:`${a.likes} likes`}]}]}]}]}))})),a=t,document.querySelector("#series-counter").textContent=a.length,n}(n)}const o=async t=>{const e=await fetch(`https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/DUygu2IA853rbrNq5k3K/comments?item_id=${t}`),n=await e.json();return e.ok?n:[{username:"Jane",creation_date:"2021-12-22",comment:"Hello!"}]},s=t=>t.map((t=>{const{username:e,comment:n,creation_date:a}=t,o=document.createElement("span");return o.textContent=`${a} ${e}: ${n}`,o}));function r(t,e){const n=t.querySelector(".commentCont");e.forEach((t=>{n.appendChild(t)}))}async function i(t,e){const n=await(async t=>{const e=`https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/DUygu2IA853rbrNq5k3K/comments?item_id=${t}`,n=await fetch(e);return(await n.json()).length})(t);!function(t,e){t.querySelector(".numComments").textContent=`(${e})`}(e,n)}const c=document.querySelector("main"),l=async(t,e)=>{const n=await(async t=>{const e=await(async t=>{const e=await fetch(t),n=await e.json(),{name:a,language:o,officialSite:s,rating:{average:r},image:{medium:i},premiered:c}=n;return{name:a,language:o,officialSite:s,average:r,medium:i,premiered:c}})(t),n=(t=>{const e=document.createElement("section");return Object.assign(e,{className:"flex flex-col overflow-y-scroll items-center rounded-md py-6 pb-6 my-[50px]"}),e.setAttribute("style","position : absolute; top: 65px; width: 80vw; background-color: #e7e5e4"),e.innerHTML=t,c.appendChild(e),e})((({name:t,language:e,officialSite:n,average:a,medium:o,premiered:s})=>`\n    <i class="fas fa-times self-end py-4 text-4xl mr-8"></i>\n    <section class="flex w-[70%]">\n    <img src=${o} class="mr-6 w-3/6" alt="cover Image">\n    <div class="flex flex-col">\n    <div class="flex flex-col mb-[50px]">\n    <h2 class='font-rockwell text-5xl font-bold py-6'>${t}</h2>\n    <ul>\n      <li class="font-black text-lg">Language: <span class="font-normal">${e}</span></li>\n      <li class="font-black text-lg">Official Site: <a class='font-normal underline hover:text-blue-600' href="${n}">${n}</a></li>\n      <li class="font-black text-lg">Rating: <span class="font-normal">${a}</span></li>\n      <li class="font-black text-lg">Premiered: <span class="font-normal">${s}</span></li>\n    </ul>\n    </div>\n\n    <div class="flex flex-col">\n    <h3 class='font-rockwell text-[2rem] font-bold py-6'>Add new comment</h3>\n    <form class='w-[100%] flex flex-col self-start items-start'>\n      <input id='username' class='mb-4 w-[100%]' placeholder='Your name here' required>\n      <textarea id='message' class='mb-4 w-[100%]' placeholder ='Your insights here' required></textarea>\n      <input class='bg-gray-300 commentBtn hover:bg-gray-400 text-gray-800 font-bold py-2 px-5 rounded mt-4' type='button' value='Comment'>\n    </form>\n    </div>\n    </div>\n    </section>\n    <section class="py-[50px] flex justify-start w-[70%]">\n   \n    <div>\n    <h3 class='font-rockwell text-2xl font-bold py-6'>Comments <span class="numComments">()</span></h3>\n    <div class='commentCont text-lg self-start flex flex-col'>\n    </div>\n    </div>\n    </section>\n    `)(e));return n})(t);!function(t){t.querySelector("i").addEventListener("click",(()=>{t.classList.add("hidden")}))}(n);const a=await o(e),l=s(a);r(n,l);const m=n.querySelector("#username"),u=n.querySelector("#message");n.querySelector(".commentBtn").addEventListener("click",(async()=>{await(async(t,e,n)=>{try{const a={item_id:`${t}`,username:e.value,comment:n.value},o=`https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/DUygu2IA853rbrNq5k3K/comments?item_id=${t}`,s=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});return await s.json()}catch(t){console.error("Error happened here!")}return null})(e,m,u),m.value="",u.value="";const t=await o(e),a=s(t.splice(-1));r(n,a),await i(e,n)})),await i(e,n)};!async function e(){const n=await a(t);!function(e){e.querySelectorAll("button").forEach(((e,n)=>{e.addEventListener("click",(()=>{l(t[n].url,t[n].name.toLowerCase().split(/[^A-Za-z0-9]/).join("-"))}))}))}(n);const o=n.querySelectorAll("article");n.querySelectorAll("i").forEach(((t,n)=>{t.addEventListener("click",(async()=>{await async function(t){try{const e=JSON.stringify({item_id:t}),n="https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/DUygu2IA853rbrNq5k3K/likes",a=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:e});return await a.json()}catch(t){console.error(t)}return null}(o[n].id),e()}))}))}()})()})();
//# sourceMappingURL=main.js.map